// Generated by Create API
// https://github.com/CreateAPI/CreateAPI

import Foundation
import Get
import HTTPHeaders
import URLQueryEncoder

extension API.Apps.WithOwnerName.WithAppName.DistributionGroups.WithDistributionGroupName.Devices {
  public var downloadDevicesList: DownloadDevicesList {
    DownloadDevicesList(path: path + "/download_devices_list")
  }

  public struct DownloadDevicesList {
    /// Path: `/v0.1/apps/{owner_name}/{app_name}/distribution_groups/{distribution_group_name}/devices/download_devices_list`
    public let path: String

    /// Returns all devices associated with the given distribution group.
    public func get(isUnprovisionedOnly: Bool? = nil, udids: [String]? = nil) -> Request<Void> {
      Request(method: "GET", url: path, query: makeGetQuery(isUnprovisionedOnly, udids), id: "devices_listCsvFormat")
    }

    private func makeGetQuery(_ isUnprovisionedOnly: Bool?, _ udids: [String]?) -> [(String, String?)] {
      let encoder = URLQueryEncoder()
      encoder.encode(isUnprovisionedOnly, forKey: "unprovisioned_only")
      encoder.encode(udids, forKey: "udids", explode: false)
      return encoder.items
    }
  }
}
