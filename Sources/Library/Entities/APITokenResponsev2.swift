// Generated by Create API
// https://github.com/CreateAPI/CreateAPI

import Foundation

public struct APITokenResponsev2: Codable, Identifiable {
  /// The unique id (UUID) of the api token
  public var id: UUID
  /// The creation time
  public var createdAt: String
  /// The token's scope. A list of allowed roles.
  public var scope: [ScopeItem]?
  /// The encrypted value of a token. This value will only be returned for token of type in_app_update.
  public var encryptedToken: String?
  /// The description of the token
  public var description: String?

  public enum ScopeItem: String, Codable, CaseIterable {
    case all
    case inAppUpdate = "in_app_update"
    case viewer
  }

  public init(id: UUID, createdAt: String, scope: [ScopeItem]? = nil, encryptedToken: String? = nil, description: String? = nil) {
    self.id = id
    self.createdAt = createdAt
    self.scope = scope
    self.encryptedToken = encryptedToken
    self.description = description
  }

  public init(from decoder: Decoder) throws {
    let values = try decoder.container(keyedBy: StringCodingKey.self)
    self.id = try values.decode(UUID.self, forKey: "id")
    self.createdAt = try values.decode(String.self, forKey: "created_at")
    self.scope = try values.decodeIfPresent([ScopeItem].self, forKey: "scope")
    self.encryptedToken = try values.decodeIfPresent(String.self, forKey: "encrypted_token")
    self.description = try values.decodeIfPresent(String.self, forKey: "description")
  }

  public func encode(to encoder: Encoder) throws {
    var values = encoder.container(keyedBy: StringCodingKey.self)
    try values.encode(id, forKey: "id")
    try values.encode(createdAt, forKey: "created_at")
    try values.encodeIfPresent(scope, forKey: "scope")
    try values.encodeIfPresent(encryptedToken, forKey: "encrypted_token")
    try values.encodeIfPresent(description, forKey: "description")
  }
}
